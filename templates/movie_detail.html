{% extends "base.html" %}

{% block content %}
<style>
  .detail-shell {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.4fr);
      gap: 16px;
  }
  .detail-left {
      background: rgba(15, 23, 42, 0.96);
      border-radius: 24px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      padding: 14px 14px 16px;
      display: flex;
      gap: 12px;
  }
  .detail-poster {
      width: 120px;
      border-radius: 18px;
      background: radial-gradient(circle at top, #1d4ed8, #020617);
      flex-shrink: 0;
      overflow: hidden;
  }
  .detail-poster img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
  }
  .detail-main {
      display: flex;
      flex-direction: column;
      gap: 6px;
  }
  .detail-title {
      font-size: 17px;
      font-weight: 600;
  }
  .detail-sub {
      font-size: 12px;
      color: var(--text-muted);
  }
  .detail-meta {
      font-size: 11px;
      color: var(--text-muted);
  }
  .badge-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 6px;
  }
  .badge {
      font-size: 10px;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: #020617;
  }
  .badge.hot {
      border-color: rgba(248, 113, 113, 0.8);
      color: #fecaca;
  }

  .detail-actions {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
  }
  .detail-btn-primary {
      border-radius: 999px;
      border: none;
      padding: 7px 16px;
      font-size: 13px;
      cursor: pointer;
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: #ecfdf5;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 6px;
  }
  .detail-btn-secondary {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      padding: 6px 14px;
      font-size: 12px;
      cursor: pointer;
      background: #020617;
      color: #e5e7eb;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 6px;
  }

  .detail-right {
      background: rgba(15, 23, 42, 0.96);
      border-radius: 24px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      padding: 14px 14px 16px;
      font-size: 12px;
      display: flex;
      flex-direction: column;
      gap: 10px;
  }
  .detail-section-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 3px;
  }
  .detail-text {
      font-size: 12px;
      color: var(--text-muted);
  }
  .info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 8px 16px;
  }
  .info-label {
      font-size: 11px;
      color: var(--text-muted);
  }
  .info-value {
      font-size: 12px;
  }

  @media (max-width: 768px) {
      .detail-shell {
          grid-template-columns: minmax(0, 1fr);
      }
      .detail-left {
          flex-direction: row;
      }
  }
</style>

<section class="detail-shell">
  <!-- LEFT: Poster + main info -->
  <article class="detail-left">
      <div class="detail-poster">
          {% if movie.poster_path %}
              <img src="{{ url_for('static', path=movie.poster_path) }}"
                   alt="{{ movie.title }} poster">
          {% endif %}
      </div>

      <div class="detail-main">
          <div>
              <div class="detail-title">{{ movie.title }}</div>
              <div class="detail-sub">
                  {{ movie.year }} · {{ movie.quality }} · {{ movie.language }}
              </div>
          </div>

          <div class="detail-meta">
              Category: {{ movie.category }}<br>
              Audio: {{ movie.audio }}<br>
              Subtitles: {{ movie.subtitles }}
          </div>

          <div class="badge-row">
              {% if movie.is_multi_dubbed %}
              <span class="badge hot">Multi audio</span>
              {% endif %}
              <span class="badge">HD ready</span>
              <span class="badge">Secure download</span>
          </div>

          <div class="detail-actions">
              {% if movie.watch_url %}
              <a href="{{ movie.watch_url }}" class="detail-btn-primary" target="_blank" rel="noopener">
                  ▶ Watch now
              </a>
              {% endif %}

              {% if movie.download_url %}
              <a href="{{ movie.download_url }}" class="detail-btn-secondary" target="_blank" rel="noopener">
                  ⬇ Download
              </a>
              {% endif %}
          </div>
      </div>
  </article>

  <!-- RIGHT: Description + info -->
  <article class="detail-right">
      <div>
          <div class="detail-section-title">Synopsis</div>
          <p class="detail-text">
              {% if movie.description %}
                  {{ movie.description }}
              {% else %}
                  No description added yet. This will be filled from the admin dashboard.
              {% endif %}
          </p>
      </div>

      <div>
          <div class="detail-section-title">Movie info</div>
          <div class="info-grid">
              <div>
                  <div class="info-label">Year</div>
                  <div class="info-value">{{ movie.year }}</div>
              </div>
              <div>
                  <div class="info-label">Language</div>
                  <div class="info-value">{{ movie.language }}</div>
              </div>
              <div>
                  <div class="info-label">Quality</div>
                  <div class="info-value">{{ movie.quality }}</div>
              </div>
              <div>
                  <div class="info-label">Category</div>
                  <div class="info-value">{{ movie.category }}</div>
              </div>
              <div>
                  <div class="info-label">Size</div>
                  <div class="info-value">{{ movie.size }}</div>
              </div>
              <div>
                  <div class="info-label">Views</div>
                  <div class="info-value">{{ movie.views }}</div>
              </div>
          </div>
      </div>
  </article>
</section>
{% endblock %}
