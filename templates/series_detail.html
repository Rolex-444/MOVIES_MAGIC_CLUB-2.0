{% extends "base.html" %}

{% block content %}
<section class="mmc-main">
  <div class="mmc-layout">
    <div class="mmc-left-column">

      <!-- HERO / HEADER -->
      <section class="detail-hero-card">
        <header class="detail-hero-header">
          <div>
            <h1 class="detail-hero-title">
              {{ series.title if series else "Series not found" }}
            </h1>
            {% if series %}
            <p class="detail-hero-sub">
              {{ series.year or "" }} · {{ series.language or "Tamil" }} · Series
            </p>
            {% endif %}
          </div>
        </header>

        <div class="detail-hero-body">
          {% if series %}
          <p class="detail-hero-text">
            {{ series.description or "Binge-worthy series with engaging story and stunning visuals." }}
          </p>
          {% else %}
          <p class="detail-hero-text">
            The series you are looking for is not available right now.
          </p>
          {% endif %}
        </div>
      </section>

      <!-- SYNOPSIS + META -->
      <section class="detail-info-card">
        <h2 class="detail-section-title">SynoPsis</h2>
        <p class="detail-body-text">
          {% if series and series.description %}
            {{ series.description }}
          {% elif series %}
            Binge-worthy series with engaging story and stunning visuals.
          {% else %}
            The series you are looking for is not available right now.
          {% endif %}
        </p>

        <div class="detail-info-grid">
          <div>
            <div class="info-label">Year</div>
            <div class="info-value">
              {{ series.year if series and series.year else "—" }}
            </div>
          </div>
          <div>
            <div class="info-label">Primary</div>
            <div class="info-value">
              {{ series.language or "Tamil" if series else "—" }}
            </div>
          </div>
          <div>
            <div class="info-label">Language</div>
            <div class="info-value">
              {{ series.language or "Tamil" if series else "—" }}
            </div>
          </div>
          <div>
            <div class="info-label">EPisodes</div>
            <div class="info-value">
              {{ episodes_count if episodes_count is defined else 0 }}
            </div>
          </div>
        </div>
      </section>

      <!-- SEASONS + EPISODES SELECTOR -->
      <section class="detail-info-card">
        <h2 class="detail-section-title">EPisodes</h2>

        {% if seasons and seasons|length > 0 %}
          <p class="detail-body-text">
            Choose an ePisode to watch or download.
          </p>

          {% for s in seasons %}
          <div style="margin-top:10px;">
            <div style="font-size:13px; font-weight:600; margin-bottom:4px;">
              Season {{ s.number }}{% if s.title %} — {{ s.title }}{% endif %}
            </div>
            <table class="episodes-table">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Title</th>
                  <th>Open</th>
                </tr>
              </thead>
              <tbody>
                {% for e in s.episodes %}
                <tr>
                  <td>{{ e.number }}</td>
                  <td>{{ e.title }}</td>
                  <td>
                    <a href="/episode/{{ e.id }}">Open episode</a>
                  </td>
                </tr>
                {% endfor %}
                {% if s.episodes|length == 0 %}
                <tr>
                  <td colspan="3" style="color:var(--text-muted); padding:6px 4px;">
                    No episodes added yet for this season.
                  </td>
                </tr>
                {% endif %}
              </tbody>
            </table>
          </div>
          {% endfor %}
        {% else %}
          <p class="detail-body-text">
            Choose an ePisode to watch or download. EPisodes will be added soon.
          </p>
        {% endif %}
      </section>

      <!-- COMMENTS NOTE -->
      <section class="detail-info-card">
        <h2 class="detail-section-title">Comments</h2>
        <p class="detail-body-text">
          Comments feature coming soon. Share this series with your friends
          and collect their feedback in your channel.
        </p>
      </section>
    </div>
  </div>
</section>
{% endblock %}
