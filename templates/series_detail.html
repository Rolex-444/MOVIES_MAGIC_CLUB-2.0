{% extends "base.html" %}

{% block content %}
<style>
    .series-shell {
        max-width: 900px;
        margin: 0 auto;
        margin-top: 24px;
        display: flex;
        flex-direction: column;
        gap: 20px;
    }
    .series-header-card {
        background: rgba(15,23,42,0.97);
        padding: 20px 20px 18px;
        border-radius: 24px;
        border: 1px solid rgba(148,163,184,0.5);
        display: flex;
        align-items: flex-start;
        gap: 18px;
    }
    .series-poster {
        width: 120px;
        min-width: 120px;
        max-width: 120px;
        aspect-ratio: 4/6;
        border-radius: 18px;
        background: radial-gradient(circle at top, #1d4ed8, #020617);
        overflow: hidden;
        flex-shrink: 0;
    }
    .series-poster img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
    }
    .series-head-main {
        display: flex;
        flex-direction: column;
        gap: 7px;
        flex: 1;
    }
    .series-title {
        font-size: 21px;
        font-weight: 650;
        margin-bottom: 2px;
    }
    .series-meta {
        font-size: 13px;
        color: var(--text-muted);
        margin-bottom: 8px;
    }
    .series-desc {
        font-size: 13px;
        color: #e5e7eb;
        margin-bottom: 2px;
    }

    .season-section {
        background: rgba(15,23,42,0.93);
        border-radius: 22px;
        border: 1px solid rgba(148,163,184,0.33);
        padding: 16px 18px 14px 18px;
        margin-bottom: 10px;
        margin-top: 7px;
    }
    .season-title-row {
        font-size: 15px;
        font-weight: 600;
        color: #a5b4fc;
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 6px;
        margin-top: 6px;
    }
    .episodes-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 7px;
    }
    .episodes-table th, .episodes-table td {
        padding: 7px 9px;
        font-size: 12px;
        border-bottom: 1px solid rgba(51,65,85,0.2);
        color: #e5e7eb;
        text-align: left;
    }
    .episodes-table th {
        color: var(--text-muted);
        font-weight: 600;
        background: none;
    }
    .episodes-table tr:last-child td {
        border-bottom: none;
    }
    .episode-btn {
        background: linear-gradient(135deg, #f97316, #ec4899);
        color: #fff;
        border: none;
        border-radius: 999px;
        padding: 6px 18px;
        font-size: 13px;
        font-weight: 500;
        cursor: pointer;
        text-decoration: none;
        transition: background 0.2s;
        display: inline-block;
    }
    .episode-btn:hover {
        background: linear-gradient(135deg, #ef4444, #f59e42);
        color: #262626;
    }
    .empty-warning {
        color: #fca5a5;
        font-size: 13px;
        padding: 6px 0 0 3px;
        font-style: italic;
    }
    .comments-section {
        margin-top: 22px;
        padding: 13px 13px 10px 13px;
        border-radius: 17px;
        background: rgba(30,41,59,0.76);
    }
    .comments-header {
        font-size: 14px;
        font-weight: 600;
    }
    .comments-desc {
        font-size: 12px;
        margin-top: 4px;
        color: var(--text-muted);
    }
    @media (max-width:700px) {
        .series-shell { padding: 0 4px; }
        .series-header-card { flex-direction: column; align-items: stretch; gap: 7px; }
        .series-poster { width: 100%; max-width: 100%; margin: 0 auto;}
    }
</style>

<div class="series-shell">
    {% if series %}
        <div class="series-header-card">
            <div class="series-poster">
                {% if series.poster_path %}
                    <img src="{{ series.poster_path }}" alt="{{ series.title }} poster">
                {% endif %}
            </div>
            <div class="series-head-main">
                <div class="series-title">{{ series.title }}</div>
                <div class="series-meta">
                    {{ series.year or "" }}
                    {% if series.audio %} · {{ series.audio }}{% endif %}
                    {% if series.category %} · {{ series.category }}{% endif %}
                </div>
                <div class="series-desc">
                    {{ series.description or "Binge-worthy series with engaging story and stunning visuals." }}
                </div>
            </div>
        </div>

        {% if seasons %}
            {% for s in seasons %}
            <div class="season-section">
                <div class="season-title-row">
                    Season {{ s.number }}
                    {% if s.title %} — <span>{{ s.title }}</span>{% endif %}
                </div>
                {% if s.episodes %}
                <table class="episodes-table">
                    <tr>
                        <th>#</th>
                        <th>Title</th>
                        <th class="hide-mobile">Open</th>
                    </tr>
                    {% for e in s.episodes %}
                    <tr>
                        <td>{{ e.number }}</td>
                        <td>{{ e.title }}</td>
                        <td>
                            <a href="/episode/{{ e.id }}" class="episode-btn">Open Episode</a>
                        </td>
                    </tr>
                    {% endfor %}
                </table>
                {% else %}
                    <div class="empty-warning">
                        No episodes added yet for this season.
                    </div>
                {% endif %}
            </div>
            {% endfor %}
        {% else %}
            <div class="empty-warning">No seasons/episodes added yet for this series.</div>
        {% endif %}

        <div class="comments-section">
            <div class="comments-header">Comments</div>
            <div class="comments-desc">
                Comments feature coming soon. Share this series with your friends and collect their feedback in your channel.
            </div>
        </div>
    {% else %}
        <div class="empty-warning">
            The series you are looking for is not available right now.
        </div>
    {% endif %}
</div>

{% endblock %}
